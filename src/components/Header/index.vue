<template>
  <el-menu
    class="menu-header"
    mode="horizontal"
    :ellipsis="false"
    default-active="/orders"
  >
    <svg
      @click="router.replace('/home')"
      width="102"
      height="32"
      style="display: block"
      t="1699869464815"
      class="icon"
      viewBox="0 0 1099 1024"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      p-id="2618"
    >
      <path d="M869.306 19.13c23.581-7.313 50.426-0.07 71.663 8.67 20.916 14.772 35.014 37.003 37.149 61.44 6.249 24.145-14.883 37.608-10.869 59.345 44.178 41.332 60.195 93.504 65.484 149.19 21.271 20.957 49.786 39.918 66.444 66.7-3.34 23.08-33.164 34.484-48.757 48.226-5.504 12.003 11.968 18.857 13.103 29.975 11.502 29.266-1.065 60.94-19.712 82.851-12.288 14.348-27.45 19.782-41.263 31.465-8.133 108.177-31.36 210.21-123.619 277.655-76.136 56.006-163.607 79.267-257.995 85.661-5.685 2.56-3.765 8.733-4.44 13.103 1.525 1.745 2.63 2.95 3.585 4.654 64.104 2.77 147.7-17.902 185.978 43.648 4.584 9.589 1.745 22.726-4.085 30.825-4.119 3.66-8.628 6.784-13.672 8.274a5004.335 5004.335 0 0 1-258.17-3.055 35.16 35.16 0 0 1-11.009-12.678c-2.24-26.176 3.445-55.296-0.424-80.902-13.749-13.922-39.14-3.944-55.436-11.793C264.495 873.146 44.288 724.904 3.276 510.371c-1.612-26.112 14.3-47.668 35.857-59.462 1.24-28.236 1.1-63.68 16.087-88.436 13.243-23.86 37.47-46.022 62.36-57.21 13.317-38.214 46.557-77.208 89.949-79.727 99.258 11.008 140.166 138.682 235.054 159.418 49.048 8.774 82.502-35.153 113.356-68.183 23.086-33.92 51.031-65.385 64.349-103.564 1.6-23.185-25.495-36.113-29.615-57.25-12.823-22.226 4.719-44.178 9.513-65.025 24.012-28.305 55.756-46.272 94.82-39.633 19.071-31.82 53.125-47.517 87.54-49.362 32.738-1.815 53.48 31.215 86.749 17.187" fill="#231916" p-id="2619"></path><path d="M839.97 56.617c23.582 5.434 43.503-18.037 67.9-6.424 14.277 2.235 28.16 14.523 33.628 28.02 2.735 15.128 2.595 30.61 2.91 46.698-20.027 4.119-36.393-14.843-57.42-17.472-88.635-23.832-174.01 1.175-233.455 69.504-17.332 2.63-25.39-15.983-33.17-27.951-6.638-12.003-1.99-29.55 0.71-42.193 21.627-23.971 53.056-32.565 83.171-24.576 20.736-17.967 36.97-48.262 66.514-51.387 27.095 0.07 50.711 6.674 69.213 25.78" fill="#E73535" p-id="2620"></path><path d="M958.784 190.353c33.844 49.187 50.21 118.552 21.626 175.512-4.154 30.935-62.964 46.563-35.153 82.182 42.787 98.804 19.782 230.312-40.378 314.624-62.68 78.167-153.135 104.692-243.509 118.44-219.927 24.716-419.293-53.347-555.229-226.618-29.41-49.513-66.094-97.699-60.625-158.429 5.003-14.703 25.605-14.348 31.784-30.156-0.71-47.127-2.77-101.568 43.683-124.439 43.573-8.593 30.185-70.144 75.602-80.407 65.559-4.864 97.873 68.05 147.34 101.818 39.668 30.545 81.43 64 135.516 55.191C639.994 357.027 649.158 99.76 853.917 131.508c42.438 4.58 77.487 26.566 104.867 58.845" fill="#FEFEFE" p-id="2621"></path><path d="M905.792 310.528c4.44 12.893 1.03 28.27-4.44 39.668-8.238 11.829-23.365 14.488-34.763 9.019-16.268-7.349-14.953-26.066-15.308-41.659 2.63-11.537 8.81-24.075 21.167-28.48 14.417 0.07 31.32 5.295 33.344 21.452" fill="#231916" p-id="2622"></path><path d="M1067.049 361.338c-5.894 20.847-28.8 25.426-44.248 36.9-3.409 1.989-8.308 0.104-13.317 0.494 5.824-19.672 12.963-42.619 18.856-64.07 17.222 0.29 26.49 17.297 38.709 26.676" fill="#F9BE00" p-id="2623"></path><path d="M1032.925 446.313c7.139 12.497 5.754 32.954-0.89 45.416-5.964 10.799-16.227 28.09-31.64 26.316-3.723-28.41-13.672-54.865-16.302-84.346 14.028-15.482 40.698-4.404 48.832 12.608" fill="#E73535" p-id="2624"></path><path d="M671.145 531.834c0.57 12.783-12.428 19.462-23.081 21.702-43.008 8.128-90.804 23.72-112.116 68.218-5.324 18.717-6.924 42.973 3.98 60.02 18.076 29.091 51.665 34.945 83.025 40.844 13.568 17.757-7.488 43.363 9.414 60.195 15.197 21.772 41.972 30.685 68.322 24.146 21.487 0.89 37.86-42.723 57.711-15.803 0.78 20.597-22.412 31.22-36.224 42.194-33.42 17.931-79.407 6.499-107.287-16.832-16.931-17.478-26.56-37.79-28.83-61.196-29.69-19.031-71.167-31.89-85.055-71.307-9.443-36.44-0.955-78.208 23.441-105.374 32.099-35.723 71.738-55.621 115.84-61.405 13.248-1.064 26.42 1.74 30.86 14.598" fill="#231916" p-id="2625"></path>
      <path d="M585.972 933.8c-1.67 12.044-1.105 25.961 11.928 30.97 47.592 0.426 93.224-3.589 142.411 0.71 11.858 6.075 27.945 6.215 35.084 20.388 5.4 15.267-11.578 11.077-19.357 11.363-69.568-4.76-140.306 2.129-206.895-7.954-1.309-19.502-0.424-41.623 2.63-60.91 8.67-6.18 30.935-10.229 34.2 5.434" fill="#F9BE00" p-id="2626"></path>
    </svg>
    <div class="flex-grow"></div>
    <el-menu-item index="/orders">{{ t('Header.orders') }}</el-menu-item>
    <el-menu-item index="/history">{{ t('Header.history') }}</el-menu-item>
    <el-sub-menu index="/language">
      <template #title>{{ t('Header.language') }}</template>
      <el-menu-item index="zh" @click="handleChangeTheme('zh')"
        >中文</el-menu-item
      >
      <el-menu-item index="en" @click="handleChangeTheme('en')"
        >English</el-menu-item
      >
    </el-sub-menu>
    <svg v-if="store.state.token" width="32" height="32" style="display: block">
      <path
        d="m16 .7c-8.437 0-15.3 6.863-15.3 15.3s6.863 15.3 15.3 15.3 15.3-6.863 15.3-15.3-6.863-15.3-15.3-15.3zm0 28c-4.021 0-7.605-1.884-9.933-4.81a12.425 12.425 0 0 1 6.451-4.4 6.507 6.507 0 0 1 -3.018-5.49c0-3.584 2.916-6.5 6.5-6.5s6.5 2.916 6.5 6.5a6.513 6.513 0 0 1 -3.019 5.491 12.42 12.42 0 0 1 6.452 4.4c-2.328 2.925-5.912 4.809-9.933 4.809z"
        fill="currentcolor"
      ></path>
    </svg>
    <span v-else @click="router.replace('/auth')">登录</span>
  </el-menu>
</template>

<script lang="ts" setup>
import { useStore } from '@/store';
import { useRouter } from 'vue-router';
import { saveLanguage } from '@/api';
import { useI18n } from 'vue-i18n';

const store = useStore();
const router = useRouter();

const emits = defineEmits<{
  (e: 'changeTheme', lang: string): void;
}>();

const handleChangeTheme = (lang: string) => {
  emits('changeTheme', lang);
  saveLanguage(lang);
};

const { t } = useI18n();
</script>

<style lang="scss" scoped>
.menu-header {
  padding: 0 12px;
  display: flex;
  align-items: center;
}
.flex-grow {
  flex-grow: 1;
}
</style>
